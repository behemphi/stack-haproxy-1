containers:
  nginx-backend-eg:
    scheduler: random
    availability: per-pool
    instances:
      min: 3
      max: 3
      default: 3
    config:
      image: "stackhub/nginx-backend-eg:latest"
      ports:
        - protocol: tcp
          container_port: "80"
    host_config:
      restart_policy: {}
  dynamic-haproxy:
    scheduler: random
    availability: per-pool
    instances:
      min: 1
      max: 1
      default: 1
    config:
      image: "stackhub/haproxy:latest"
      env:
        SE_API_TOKEN: c7d728cb050bb558
        SE_BACKEND_KEY: apps/dynamic-haproxy-nginx-backend-eg-80/containers
        SE_BACKEND_RANGE: "/apps/dynamic-haproxy-nginx-backend-eg-80/containers/*"
      ports:
        - protocol: tcp
          host_port: "80"
          container_port: "5000"
        - host_port: "1936"
          protocol: tcp
          container_port: "1936"
    host_config:
      restart_policy: {}

